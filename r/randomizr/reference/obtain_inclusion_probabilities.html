<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Obtain inclusion probabilities — obtain_inclusion_probabilities • randomizr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Obtain inclusion probabilities — obtain_inclusion_probabilities"><meta name="description" content="You can either give obtain_inclusion_probabilities() an declaration, as created by declare_rs or you can specify the other arguments to describe a random sampling procedure.
This function is especially useful when units have different inclusion probabilities and the analyst plans to use inverse-probability weights."><meta property="og:description" content="You can either give obtain_inclusion_probabilities() an declaration, as created by declare_rs or you can specify the other arguments to describe a random sampling procedure.
This function is especially useful when units have different inclusion probabilities and the analyst plans to use inverse-probability weights."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">randomizr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/randomizr_vignette.html">Getting started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/randomizr_vignette.html">Getting started with randomizr</a></li>
    <li><a class="dropdown-item" href="../articles/srandomizr_vignette.html">Getting started with randomizr for Stata</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-software" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Software</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-software"><li><a class="external-link dropdown-item" href="https://declaredesign.org/r/declaredesign/">DeclareDesign</a></li>
    <li><a class="dropdown-item" href="https://declaredesign.org/r/randomizr/">randomizr</a></li>
    <li><a class="external-link dropdown-item" href="https://declaredesign.org/r/fabricatr/">fabricatr</a></li>
    <li><a class="external-link dropdown-item" href="https://declaredesign.org/r/estimatr/">estimatr</a></li>
    <li><a class="external-link dropdown-item" href="https://declaredesign.org/r/rdss/">rdss</a></li>
    <li><a class="external-link dropdown-item" href="https://declaredesign.org/r/designlibrary/">DesignLibrary</a></li>
    <li><a class="external-link dropdown-item" href="https://eos.wzb.eu/ipi/DDWizard/">DesignWizard</a></li>
  </ul></li>
<li class="nav-item"><a class="external-link nav-link" href="https://declaredesign.org">declaredesign.org</a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Obtain inclusion probabilities</h1>
      <small class="dont-index">Source: <a href="https://github.com/DeclareDesign/randomizr/blob/main/R/declare_rs.R" class="external-link"><code>R/declare_rs.R</code></a></small>
      <div class="d-none name"><code>obtain_inclusion_probabilities.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>You can either give obtain_inclusion_probabilities() an declaration, as created by <code><a href="declare_rs.html">declare_rs</a></code> or you can specify the other arguments to describe a random sampling procedure.<br><br>
This function is especially useful when units have different inclusion probabilities and the analyst plans to use inverse-probability weights.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">obtain_inclusion_probabilities</span><span class="op">(</span></span>
<span>  declaration <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  N <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  strata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  clusters <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  n <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  n_unit <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  prob <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  prob_unit <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  strata_n <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  strata_prob <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  simple <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  check_inputs <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-declaration">declaration<a class="anchor" aria-label="anchor" href="#arg-declaration"></a></dt>
<dd><p>A random sampling declaration, created by <code><a href="declare_rs.html">declare_rs</a></code>.</p></dd>


<dt id="arg-n">N<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>The number of units. N must be a positive integer. (required)</p></dd>


<dt id="arg-strata">strata<a class="anchor" aria-label="anchor" href="#arg-strata"></a></dt>
<dd><p>A vector of length N that indicates which stratum each unit belongs to.</p></dd>


<dt id="arg-clusters">clusters<a class="anchor" aria-label="anchor" href="#arg-clusters"></a></dt>
<dd><p>A vector of length N that indicates which cluster each unit belongs to.</p></dd>


<dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>Use for a design in which n units (or clusters) are sampled. In a stratified design, exactly n units in each stratum will be sampled. (optional)</p></dd>


<dt id="arg-n-unit">n_unit<a class="anchor" aria-label="anchor" href="#arg-n-unit"></a></dt>
<dd><p>Under complete random sampling, must be constant across units. Under stratified random sampling, must be constant within strata.</p></dd>


<dt id="arg-prob">prob<a class="anchor" aria-label="anchor" href="#arg-prob"></a></dt>
<dd><p>Use for a design in which either floor(N*prob) or ceiling(N*prob) units (or clusters) are sampled. The probability of being sampled is exactly prob because with probability 1-prob, floor(N*prob) units (or clusters) will be sampled and with probability prob, ceiling(N*prob) units (or clusters) will be sampled. prob must be a real number between 0 and 1 inclusive. (optional)</p></dd>


<dt id="arg-prob-unit">prob_unit<a class="anchor" aria-label="anchor" href="#arg-prob-unit"></a></dt>
<dd><p>Must of be of length N. Under simple random sampling, can be different for each unit or cluster.  Under complete random sampling, must be constant across units. Under stratified random sampling, must be constant within strata.</p></dd>


<dt id="arg-strata-n">strata_n<a class="anchor" aria-label="anchor" href="#arg-strata-n"></a></dt>
<dd><p>Use for a design in which strata_n describes the number of units to sample within each stratum.</p></dd>


<dt id="arg-strata-prob">strata_prob<a class="anchor" aria-label="anchor" href="#arg-strata-prob"></a></dt>
<dd><p>Use for a design in which strata_prob describes the probability of being sampled within each stratum. Differs from prob in that the probability of being sampled can vary across strata.</p></dd>


<dt id="arg-simple">simple<a class="anchor" aria-label="anchor" href="#arg-simple"></a></dt>
<dd><p>logical, defaults to FALSE. If TRUE, simple random sampling is used. When <code>simple = TRUE</code>, please do not specify n or strata_n. When <code>simple = TRUE</code>, <code>prob</code> may vary by unit.</p></dd>


<dt id="arg-check-inputs">check_inputs<a class="anchor" aria-label="anchor" href="#arg-check-inputs"></a></dt>
<dd><p>logical. Defaults to TRUE.</p></dd>

</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Draw a stratified random sample</span></span></span>
<span class="r-in"><span><span class="va">strata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>,<span class="st">"C"</span><span class="op">)</span>, times<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">100</span>, <span class="fl">200</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">declaration</span> <span class="op">&lt;-</span> <span class="fu"><a href="declare_rs.html">declare_rs</a></span><span class="op">(</span>strata <span class="op">=</span> <span class="va">strata</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">observed_probabilities</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>   <span class="fu">obtain_inclusion_probabilities</span><span class="op">(</span>declaration <span class="op">=</span> <span class="va">declaration</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">strata</span>, <span class="va">observed_probabilities</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       observed_probabilities</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> strata 0.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      A  50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      B 100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      C 200</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Sometimes it is convenient to skip the declaration step</span></span></span>
<span class="r-in"><span><span class="va">observed_probabilities</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>   <span class="fu">obtain_inclusion_probabilities</span><span class="op">(</span>strata <span class="op">=</span> <span class="va">strata</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">strata</span>, <span class="va">observed_probabilities</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       observed_probabilities</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> strata 0.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      A  50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      B 100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      C 200</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Alexander Coppock.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

