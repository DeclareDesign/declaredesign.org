<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Advanced features • fabricatr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Advanced features">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">fabricatr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/getting_started.html">Getting started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/getting_started.html">Getting started with fabricatr</a></li>
    <li><a class="dropdown-item" href="../articles/building_importing.html">Building and Importing Data</a></li>
    <li><a class="dropdown-item" href="../articles/common_social.html">Common Social Science variables</a></li>
    <li><a class="dropdown-item" href="../articles/cross_classified.html">Panel and Cross-classified data</a></li>
    <li><a class="dropdown-item" href="../articles/resampling.html">Resampling data with fabricatr</a></li>
    <li><a class="dropdown-item" href="../articles/time_series.html">Time series data with fabricatr</a></li>
    <li><a class="dropdown-item" href="../articles/variable_generation.html">Generating discrete random variables with fabricatr</a></li>
    <li><a class="dropdown-item" href="../articles/other_packages.html">Using other data generating packages with fabricatr</a></li>
    <li><a class="dropdown-item" href="../articles/advanced_features.html">Advanced features</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-software" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Software</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-software">
<li><a class="external-link dropdown-item" href="https://declaredesign.org/r/declaredesign/">DeclareDesign</a></li>
    <li><a class="external-link dropdown-item" href="https://declaredesign.org/r/randomizr/">randomizr</a></li>
    <li><a class="dropdown-item" href="https://declaredesign.org/r/fabricatr/">fabricatr</a></li>
    <li><a class="external-link dropdown-item" href="https://declaredesign.org/r/estimatr/">estimatr</a></li>
    <li><a class="external-link dropdown-item" href="https://declaredesign.org/r/designlibrary/">DesignLibrary</a></li>
    <li><a class="external-link dropdown-item" href="https://eos.wzb.eu/ipi/DDWizard/">DesignWizard</a></li>
  </ul>
</li>
<li class="nav-item"><a class="external-link nav-link" href="https://declaredesign.org">declaredesign.org</a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<script src="advanced_features_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Advanced features</h1>
                        <h4 data-toc-skip class="author">Aaron Rudkin</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/DeclareDesign/fabricatr/blob/main/vignettes/advanced_features.Rmd" class="external-link"><code>vignettes/advanced_features.Rmd</code></a></small>
      <div class="d-none name"><code>advanced_features.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="more-complicated-level-creation-with-variable-numbers-of-observations">More complicated level creation with variable numbers of observations<a class="anchor" aria-label="anchor" href="#more-complicated-level-creation-with-variable-numbers-of-observations"></a>
</h2>
<p><code><a href="../reference/fabricate.html">add_level()</a></code> can be used to create more complicated patterns of nesting. For example, when creating lower level data, it is possible to use a different <code>N</code> for each of the values of the higher level data:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">variable_data</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/fabricate.html">fabricate</a></span><span class="op">(</span></span>
<span>    cities <span class="op">=</span> <span class="fu"><a href="../reference/fabricate.html">add_level</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fl">2</span>, elevation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">N</span>, min <span class="op">=</span> <span class="fl">1000</span>, max <span class="op">=</span> <span class="fl">2000</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    citizens <span class="op">=</span> <span class="fu"><a href="../reference/fabricate.html">add_level</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span>, age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">N</span>, <span class="fl">18</span>, <span class="fl">70</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">variable_data</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">cities</th>
<th align="right">elevation</th>
<th align="left">citizens</th>
<th align="right">age</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="right">1778</td>
<td align="left">1</td>
<td align="right">46</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="right">1778</td>
<td align="left">2</td>
<td align="right">50</td>
</tr>
<tr class="odd">
<td align="left">2</td>
<td align="right">1499</td>
<td align="left">3</td>
<td align="right">35</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="right">1499</td>
<td align="left">4</td>
<td align="right">65</td>
</tr>
<tr class="odd">
<td align="left">2</td>
<td align="right">1499</td>
<td align="left">5</td>
<td align="right">34</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="right">1499</td>
<td align="left">6</td>
<td align="right">23</td>
</tr>
</tbody>
</table>
<p>Here, each city has a different number of citizens. And the value of <code>N</code> used to create the age variable automatically updates as needed. The result is a dataset with 6 citizens, 2 in the first city and 4 in the second. As long as N is either a number, or a vector of the same length of the current lowest level of the data, <code><a href="../reference/fabricate.html">add_level()</a></code> will know what to do.</p>
<p>It is also possible to provide a function to N, enabling a <em>random</em> number of citizens per city:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_data</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/fabricate.html">fabricate</a></span><span class="op">(</span></span>
<span>    cities <span class="op">=</span> <span class="fu"><a href="../reference/fabricate.html">add_level</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fl">2</span>, elevation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">N</span>, min <span class="op">=</span> <span class="fl">1000</span>, max <span class="op">=</span> <span class="fl">2000</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    citizens <span class="op">=</span> <span class="fu"><a href="../reference/fabricate.html">add_level</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>, size <span class="op">=</span> <span class="fl">2</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">N</span>, <span class="fl">18</span>, <span class="fl">70</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">my_data</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">cities</th>
<th align="right">elevation</th>
<th align="left">citizens</th>
<th align="right">age</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="right">1850</td>
<td align="left">1</td>
<td align="right">53</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="right">1850</td>
<td align="left">2</td>
<td align="right">55</td>
</tr>
<tr class="odd">
<td align="left">2</td>
<td align="right">1128</td>
<td align="left">3</td>
<td align="right">45</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="right">1128</td>
<td align="left">4</td>
<td align="right">42</td>
</tr>
<tr class="odd">
<td align="left">2</td>
<td align="right">1128</td>
<td align="left">5</td>
<td align="right">47</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="right">1128</td>
<td align="left">6</td>
<td align="right">69</td>
</tr>
<tr class="odd">
<td align="left">2</td>
<td align="right">1128</td>
<td align="left">7</td>
<td align="right">40</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="right">1128</td>
<td align="left">8</td>
<td align="right">18</td>
</tr>
</tbody>
</table>
<p>Here, each city is given a random number of citizens between 1 and 6. Since the <code><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample()</a></code> function returns a vector of length 2, this is like specifying 2 separate <code>N</code>s as in the example above.</p>
<p>It is also possible to define <code>N</code> on the basis of higher level variables themselves. Consider the following example:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">variable_n</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fabricate.html">fabricate</a></span><span class="op">(</span></span>
<span>  cities <span class="op">=</span> <span class="fu"><a href="../reference/fabricate.html">add_level</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fl">5</span>, population <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">N</span>, <span class="fl">10</span>, <span class="fl">200</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  citizens <span class="op">=</span> <span class="fu"><a href="../reference/fabricate.html">add_level</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">population</span> <span class="op">*</span> <span class="fl">0.3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">cities</th>
<th align="right">population</th>
<th align="left">citizens</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="right">133</td>
<td align="left">001</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="right">133</td>
<td align="left">002</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="right">133</td>
<td align="left">003</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="right">133</td>
<td align="left">004</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="right">133</td>
<td align="left">005</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="right">133</td>
<td align="left">006</td>
</tr>
</tbody>
</table>
<p>Here, the city has a defined population, and the number of citizens in our simulated data reflects a sample of 30% of that population. Although we only display the first 6 rows for brevity’s sake, the first city would have 27 rows in total.</p>
<p>Finally, relying on the ID label from the higher level, it is also possible to define <code>N</code> on the basis of the higher level’s length:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n_inherit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fabricate.html">fabricate</a></span><span class="op">(</span></span>
<span>  cities <span class="op">=</span> <span class="fu"><a href="../reference/fabricate.html">add_level</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fl">5</span>, population <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">N</span>, <span class="fl">10</span>, <span class="fl">200</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  citizens <span class="op">=</span> <span class="fu"><a href="../reference/fabricate.html">add_level</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">cities</span><span class="op">)</span>, replace<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Here, each city has a random number of citizens from 1 to 10, but we need to supply the length of the higher level’s variable (in this case, the ID label <code>cities</code>) to the sample function to ensure that one draw is made per city.</p>
</div>
<div class="section level2">
<h2 id="correlated-variables-with-custom-functions">Correlated variables with custom functions<a class="anchor" aria-label="anchor" href="#correlated-variables-with-custom-functions"></a>
</h2>
<p>Some users might be implemented in drawing correlated variables generated by functions not amongst the default <code>R</code> statistical distributions or those functions supplied by <strong>fabricatr</strong>. Any function can be made to work with <code><a href="../reference/correlate.html">correlate()</a></code> provided it accepts an argument called <code>quantile_y</code> which will pass a series of quantiles to draw from the distribution of interest.</p>
<p>As an example, you might have some external data that represents an empirical distribution you wish to draw from. Here we use actual county level vote data from the 2016 US presidential election to generate a vote share correlated with</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load external data: Thanks to Tony McGovern, https://github.com/tonmcg</span></span>
<span><span class="va">county_level_2016_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">url</a></span><span class="op">(</span><span class="st">"https://raw.githubusercontent.com/tonmcg/County_Level_Election_Results_12-16/master/2016_US_County_Level_Presidential_Results.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Function that takes quantile_y and maps to the empirical quantiles of dataset</span></span>
<span><span class="va">custom_quantile</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">quantile_y</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/ecdf.html" class="external-link">ecdf</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">(</span><span class="va">quantile_y</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Traditional fabricate() call:</span></span>
<span><span class="va">county_vote_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fabricate.html">fabricate</a></span><span class="op">(</span></span>
<span>  N <span class="op">=</span> <span class="fl">500</span>,</span>
<span>  poverty_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">N</span>, min <span class="op">=</span> <span class="fl">0.01</span>, max <span class="op">=</span> <span class="fl">0.40</span><span class="op">)</span>,</span>
<span>  dem_vote <span class="op">=</span> <span class="fu"><a href="../reference/correlate.html">correlate</a></span><span class="op">(</span><span class="va">custom_quantile</span>, </span>
<span>                       data <span class="op">=</span> <span class="va">county_level_2016_results</span><span class="op">$</span><span class="va">per_dem</span>,</span>
<span>                       given <span class="op">=</span> <span class="va">poverty_rate</span>, </span>
<span>                       rho <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">county_vote_data</span><span class="op">$</span><span class="va">dem_vote</span>, <span class="va">county_vote_data</span><span class="op">$</span><span class="va">poverty_rate</span>, method<span class="op">=</span><span class="st">"spearman"</span><span class="op">)</span></span></code></pre></div>
<p>0.34</p>
</div>
<div class="section level2">
<h2 id="tidyverse-integration">Tidyverse integration<a class="anchor" aria-label="anchor" href="#tidyverse-integration"></a>
</h2>
<p>Because the functions in <strong>fabricatr</strong> take data and return data, they are cross-compatible with a <code>tidyverse</code> workflow. Here is an example of using <strong>magrittr</strong>’s pipe operator (<code>%&gt;%</code>) and <strong>dplyr</strong>’s <code>group_by</code> and <code>mutate</code> verbs to add new data.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">my_data</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/fabricate.html">fabricate</a></span><span class="op">(</span></span>
<span>    cities <span class="op">=</span> <span class="fu"><a href="../reference/fabricate.html">add_level</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fl">2</span>, elevation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">N</span>, min <span class="op">=</span> <span class="fl">1000</span>, max <span class="op">=</span> <span class="fl">2000</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    citizens <span class="op">=</span> <span class="fu"><a href="../reference/fabricate.html">add_level</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>, age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">N</span>, <span class="fl">18</span>, <span class="fl">70</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">cities</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>pop <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">my_data</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">cities</th>
<th align="right">elevation</th>
<th align="left">citizens</th>
<th align="right">age</th>
<th align="right">pop</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="right">1988</td>
<td align="left">1</td>
<td align="right">47</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="right">1988</td>
<td align="left">2</td>
<td align="right">32</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">2</td>
<td align="right">1899</td>
<td align="left">3</td>
<td align="right">60</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="right">1899</td>
<td align="left">4</td>
<td align="right">66</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">2</td>
<td align="right">1899</td>
<td align="left">5</td>
<td align="right">52</td>
<td align="right">3</td>
</tr>
</tbody>
</table>
<p>It is also possible to use the pipe operator (<code>%&gt;%</code>) to direct the flow of data between <code><a href="../reference/fabricate.html">fabricate()</a></code> calls. Remember that every <code><a href="../reference/fabricate.html">fabricate()</a></code> call can import existing data frames, and every call returns a single data frame.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_data</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/deprecated.html" class="external-link">data_frame</a></span><span class="op">(</span>Y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/fabricate.html">fabricate</a></span><span class="op">(</span>lower_level <span class="op">=</span> <span class="fu"><a href="../reference/fabricate.html">add_level</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fl">3</span>, Y2 <span class="op">=</span> <span class="va">Y</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">N</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: `data_frame()` was deprecated in tibble 1.1.0.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Please use `tibble()` instead.</span></span>
<span><span class="co">## <span style="color: #555555;">This warning is displayed once every 8 hours.</span></span></span>
<span><span class="co">## <span style="color: #555555;">Call `lifecycle::last_lifecycle_warnings()` to see where this warning was</span></span></span>
<span><span class="co">## <span style="color: #555555;">generated.</span></span></span></code></pre>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_data</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">Y</th>
<th align="left">lower_level</th>
<th align="right">Y2</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">10</td>
<td align="left">1</td>
<td align="right">9.2</td>
</tr>
<tr class="even">
<td align="right">10</td>
<td align="left">2</td>
<td align="right">9.8</td>
</tr>
<tr class="odd">
<td align="right">10</td>
<td align="left">3</td>
<td align="right">9.6</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">4</td>
<td align="right">4.8</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="left">5</td>
<td align="right">5.2</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">6</td>
<td align="right">4.3</td>
</tr>
</tbody>
</table>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Graeme Blair, Jasper Cooper, Alexander Coppock, Macartan Humphreys, Aaron Rudkin, Neal Fultz.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
